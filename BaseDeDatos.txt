-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.administrador
(
    id_administrador serial NOT NULL,
    nombre_de_usuario character varying(255) COLLATE pg_catalog."default",
    contrasena character varying(255) COLLATE pg_catalog."default",
    correo_electronico character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT administrador_pkey PRIMARY KEY (id_administrador)
);

CREATE TABLE IF NOT EXISTS public.asesor
(
    id_asesor serial NOT NULL,
    nombre_de_usuario character varying(255) COLLATE pg_catalog."default",
    contrasena character varying(255) COLLATE pg_catalog."default",
    correo_electronico character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT asesor_pkey PRIMARY KEY (id_asesor)
);

CREATE TABLE IF NOT EXISTS public.autor
(
    id_autor serial NOT NULL,
    apellido_paterno character varying(255) COLLATE pg_catalog."default",
    apellido_materno character varying(255) COLLATE pg_catalog."default",
    nombres character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT autor_pkey PRIMARY KEY (id_autor)
);

CREATE TABLE IF NOT EXISTS public.etiqueta
(
    id_etiqueta serial NOT NULL,
    nombre_etiqueta character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT etiqueta_pkey PRIMARY KEY (id_etiqueta)
);

CREATE TABLE IF NOT EXISTS public.tesis
(
    id_tesis serial NOT NULL,
    titulo_de_tesis character varying(255) COLLATE pg_catalog."default",
    fecha_de_publicacion date,
    archivo_pdf bytea,
    carrera character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT tesis_pkey PRIMARY KEY (id_tesis)
);

CREATE TABLE IF NOT EXISTS public.tesis_asesor
(
    id_tesis integer,
    id_asesor integer
);

CREATE TABLE IF NOT EXISTS public.tesis_autor
(
    id_tesis integer,
    id_autor integer
);

CREATE TABLE IF NOT EXISTS public.tesis_etiqueta
(
    id_tesis integer,
    id_etiqueta integer
);

ALTER TABLE IF EXISTS public.tesis_asesor
    ADD CONSTRAINT tesis_asesor_id_asesor_fkey FOREIGN KEY (id_asesor)
    REFERENCES public.asesor (id_asesor) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tesis_asesor
    ADD CONSTRAINT tesis_asesor_id_tesis_fkey FOREIGN KEY (id_tesis)
    REFERENCES public.tesis (id_tesis) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tesis_autor
    ADD CONSTRAINT tesis_autor_id_autor_fkey FOREIGN KEY (id_autor)
    REFERENCES public.autor (id_autor) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tesis_autor
    ADD CONSTRAINT tesis_autor_id_tesis_fkey FOREIGN KEY (id_tesis)
    REFERENCES public.tesis (id_tesis) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tesis_etiqueta
    ADD CONSTRAINT tesis_etiqueta_id_etiqueta_fkey FOREIGN KEY (id_etiqueta)
    REFERENCES public.etiqueta (id_etiqueta) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tesis_etiqueta
    ADD CONSTRAINT tesis_etiqueta_id_tesis_fkey FOREIGN KEY (id_tesis)
    REFERENCES public.tesis (id_tesis) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;